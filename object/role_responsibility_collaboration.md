# [객체지향] 역할, 책임, 협력을 통한 설계

- **Tags:** #ObjectOriented #OOP #Design #ResponsibilityDrivenDesign

---

### 무엇을 배웠는가?
객체지향 설계의 본질은 개별 객체를 만드는 것이 아니라, 애플리케이션의 기능을 완성하기 위해 객체 간의 `협력(Collaboration)`을 설계하는 과정이라는 것을 배웠습니다.   
이 협력 안에서 각 객체는 자신만의 `책임(Responsibility)`을 수행하며, 이 책임들의 집합을 추상화하여 `역할(Role)`을 부여함으로써 유연하고 재사용 가능한 설계를 만들 수 있습니다.

---

### 왜 중요하고, 어떤 맥락인가?
하나의 거대한 '만능' 객체가 모든 것을 처리하는 절차적 방식에서 벗어나는 것이 객체지향의 핵심입니다.  
시스템은 **스스로 판단하고 행동하는 자율적인 객체들의 공동체**로 바라보아야 합니다.

예를 들어, "영화를 예매한다"는 기능을 구현할 때, 시스템이라는 단일 객체가 모든 것을 처리하는 것이 아닙니다.   
대신, `Screening` 객체는 예매를 요청받고, `Movie` 객체에게 가격 계산을 요청하며, `DiscountPolicy` 객체는 할인 금액을 계산하는 등 각자의 책임을 가진 객체들이 메시지를 주고받으며 **협력**합니다.  
이처럼 책임을 적절히 분배하면, 각 객체는 자신의 일에만 집중하게 되어 **응집도가 높아지고 결합도가 낮아져** 변경에 유연한 시스템을 만들 수 있습니다.

---

### 상세 내용

#### 1. 협력: 기능 구현을 위한 객체들의 상호작용
객체는 고립된 존재가 아니라, 다른 객체와 메시지를 주고받으며 공동의 목표를 달성하는 사회적인 존재입니다.

* **방법**: 객체는 다른 객체의 `메서드를 호출(메시지 전송)`함으로써 협력합니다.
* **전제조건**: 성공적인 협력을 위해, 객체는 스스로의 상태(정보)를 잘 알고 스스로 행동을 결정할 수 있는 **자율적인 존재**여야 합니다. 즉, 캡슐화가 잘 되어 있어야 합니다.
* **예시**: `Screening` 객체는 `Movie` 객체에게 `calculateMovieFee` 메시지를 보내 영화 요금 계산을 요청함으로써 협력합니다. 이 협력은 `Movie`가 자신의 가격과 할인 정책을 알고 있기에 가능합니다.

#### 2. 책임: 객체가 무엇을 알고, 무엇을 할 수 있는가
책임은 객체가 **알고 있는 것**과 **할 수 있는 것**으로 구성됩니다. 올바른 객체에게 올바른 책임을 할당하는 것이 설계의 핵심입니다.

* **책임 주도 설계 (Responsibility-Driven Design)**: "이 데이터를 가진 객체는 누구인가?"가 아니라 "이 행동(메시지)을 가장 잘 수행할 수 있는 객체는 누구인가?"를 먼저 생각하는 방식입니다.
* **프로세스**:
    1.  시스템에 필요한 `메시지(행동)`를 먼저 정의합니다. (e.g., "예매하라", "가격을 계산하라")
    2.  그 메시지를 처리하는 데 가장 많은 정보를 가진 **객체에게 책임을 할당**합니다.
        * "예매하라" -> 상영 정보를 아는 `Screening`에게 할당.
        * "가격을 계산하라" -> 가격과 할인 정책을 아는 `Movie`에게 할당.
* **장점**: 이 방식은 객체가 외부에 최소한의 **추상적인 인터페이스**만 노출하게 하여, 내부 구현의 변경이 외부에 영향을 미치지 않도록 합니다.

#### 3. 역할: 유연하고 재사용 가능한 협력을 만듦
역할은 여러 객체들이 공유할 수 있는 **책임의 집합을 추상화**한 것입니다.

* **문제**: `AmountDiscountPolicy`와 `PercentDiscountPolicy`가 협력에 참여하는 방식은 "할인 요금을 계산한다"는 점에서 동일합니다. 이를 개별적으로 다루면 중복이 발생하고 유연성이 떨어집니다.
* **해결**: "할인 요금을 계산한다"는 책임을 뽑아내어 **`DiscountPolicy`라는 역할(추상 클래스/인터페이스)로 추상화**합니다.
* **장점**:
    1.  **단순화**: `Movie`는 이제 구체적인 할인 정책(`Amount`, `Percent`)이 아닌 `DiscountPolicy`라는 상위 수준의 역할에만 의존하므로 설계가 단순해집니다.
    2.  **유연성**: `Movie` 코드의 변경 없이도, 런타임에 다양한 `DiscountPolicy` 구현체를 교체하여 협력 방식을 바꿀 수 있습니다. (e.g., 새로운 '쿠폰 할인 정책' 추가)

---

### 핵심
* 객체지향 설계의 시작은 클래스가 아닌, **객체들의 협력**을 그리는 것이다.
* **책임 주도 설계**: 행동(메시지)을 먼저 정의하고, 그 행동을 가장 잘 수행할 **정보 전문가**에게 책임을 할당하라.
* **역할을 사용한 추상화**: 반복되는 책임의 집합을 역할로 추상화하면, 협력을 유연하고 재사용 가능하게 만들 수 있다. 이는 변경에 강한 설계를 만드는 핵심 도구다.