
## μ„λΈν΄λμ‹±, μ„λΈνƒ€μ΄ν•‘ (feat. LSP)

### π“… Date: 2025. 12. 30

### π·οΈ Tags: #OOP #Kotlin #LSP #ISP #Inheritance #DesignByContract

### π’΅ Core Message

> **"μƒμ†μ€ μ½”λ“ μ¬μ‚¬μ©μ΄ μ•„λ‹, νƒ€μ… κ³„μΈµ(Type Hierarchy) μ„¤κ³„λ¥Ό λ©ν‘λ΅ ν•΄μ•Ό ν•©λ‹λ‹¤."**
>
>   - μ„λΈνƒ€μ…μ€ μ–Έμ λ‚ μνΌνƒ€μ…μ„ λ€μ²΄ν•  μ μμ–΄μ•Ό ν•©λ‹λ‹¤ (λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™).

-----

### 1. Scenario: νμΌ μ²λ¦¬ μ‹μ¤ν…μ ν™•μ¥

λ¬Έμ„ κ΄€λ¦¬ μ‹μ¤ν…μ„ κ°λ°ν•λ©΄μ„ `File`μ΄λΌλ” μƒμ„ κ°λ…μ„ λ§λ“¤κ³ , κ·Έ ν•μ„ κ°λ…μΌλ΅ `Word`μ™€ `Excel` ν΄λμ¤λ¥Ό μ •μν•λ ¤λ” μƒν™©μ…λ‹λ‹¤. λ¨λ“  νμΌμ€ PDFλ΅ λ‚΄λ³΄λ‚Ό μ μμ–΄μ•Ό ν•λ‹¤λ” κ°€μ •ν•μ— μ„¤κ³„λ¥Ό μ‹μ‘ν–μµλ‹λ‹¤.

### 2. AS-IS: μλ»λ μƒμ† (μ„λΈν΄λμ‹±μ ν•¨μ •)

"Wordμ™€ Excelμ€ Fileμ΄λ‹¤(is-a)"λΌλ” μ–Έμ–΄μ  μ§κ΄€μ—λ§ μμ΅΄ν•μ—¬, `File` μΈν„°νμ΄μ¤μ— `exportPdf()` κΈ°λ¥μ„ μ¶”κ°€ν–μµλ‹λ‹¤.

#### π« λ¬Έμ μ : ν–‰λ™ νΈν™μ„± μ„λ°

`Word`λ” PDF λ³€ν™μ΄ κ°€λ¥ν•μ§€λ§, `Excel`μ€ PDF λ³€ν™ κΈ°λ¥μ„ μ§€μ›ν•μ§€ μ•μ•„ λ¬Έμ κ°€ λ°μƒν–μµλ‹λ‹¤.

```kotlin
interface File {
    fun exportPdf()
}

class Word : File {
    override fun exportPdf() { /* μ •μƒ λ™μ‘ */ }
}

class Excel : File {
    // λ¬Έμ  λ°μƒ: Excel λ¬Έλ§¥μ— exportPdfλ” μ–΄μΈλ¦¬μ§€ μ•μµλ‹λ‹¤.
    override fun exportPdf() {
        // μ‹λ„ 1: λ‚΄λ¶€ κµ¬ν„ λΉ„μ°κΈ° (ν΄λΌμ΄μ–ΈνΈλ” μ™ λ™μ‘ν•μ§€ μ•λ”μ§€ λ¨λ¦…λ‹λ‹¤)
        // μ‹λ„ 2: μμ™Έ λμ§€κΈ° (λ°νƒ€μ„ μ—λ¬ λ°μƒ μ„ν—μ΄ μμµλ‹λ‹¤)
        throw UnsupportedException() 
    }
}
```

* **λ‚΄λ¶€ κµ¬ν„ λΉ„μ°κΈ° / μμ™Έ λμ§€κΈ°:** ν΄λΌμ΄μ–ΈνΈκ°€ `File` νƒ€μ…μ„ λ―Ώκ³  λ©”μ„λ“λ¥Ό νΈμ¶ν–μ„ λ•, μκΈ°μΉ μ•μ€ λ™μ‘μ΄λ‚ μ—λ¬λ¥Ό λ§μ£Όν•κ² λ©λ‹λ‹¤.
* **λ¶„κΈ° μ²λ¦¬(`if is Word`):** OCP(κ°λ°©-νμ‡„ μ›μΉ™)λ¥Ό μ„λ°ν•κ² λλ©°, μƒλ΅μ΄ νƒ€μ…μ΄ μ¶”κ°€λ  λ•λ§λ‹¤ μ½”λ“λ¥Ό κ³„μ† μμ •ν•΄μ•Ό ν•λ” λ²κ±°λ΅μ›€μ΄ μƒκΉλ‹λ‹¤.

> **Insight:** λ‹¨μν μ΄λ¦„μ΄ λΉ„μ·ν•λ‹¤κ³  ν•΄μ„ μƒμ†μ„ μ‚¬μ©ν•λ©΄ μ• λ©λ‹λ‹¤. **μ„λΈνƒ€μ…μ€ μνΌνƒ€μ…μ ν–‰λ™μ„ μ™„λ²½ν•κ² λ€μ²΄**ν•  μ μμ–΄μ•Ό ν•©λ‹λ‹¤.

-----

### 3\. TO-BE: μ¬λ°”λ¥Έ μƒμ† (μ„λΈνƒ€μ΄ν•‘κ³Ό κ³„μ•½)

μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ λ‘ κ°€μ§€ μ ‘κ·Ό λ°©μ‹μ„ μ μ©ν–μµλ‹λ‹¤. **μΈν„°νμ΄μ¤ λ¶„λ¦¬**λ¥Ό ν†µν•΄ μ—­ν• μ„ λ…ν™•ν ν•κ³ , **κ³„μ•½μ— μν• μ„¤κ³„**λ΅ λ€μ²΄ κ°€λ¥μ„±μ„ λ³΄μ¥ν–μµλ‹λ‹¤.

#### β… ν•΄κ²°μ±… 1: μΈν„°νμ΄μ¤ λ¶„λ¦¬ (ISP)

κ³µν†µλ `File` νƒ€μ…κ³Ό νΉμν• ν–‰λ™μΈ `PdfExporter`λ¥Ό λ¶„λ¦¬ν•μ—¬, ν•„μ”ν• κ°μ²΄λ§ ν•΄λ‹Ή ν–‰λ™μ„ κµ¬ν„ν•λ„λ΅ λ³€κ²½ν–μµλ‹λ‹¤.

```kotlin
interface File { /* κ³µν†µ μ†μ„± */ }

interface PdfExporter {
    fun exportPdf()
}

class Word : File, PdfExporter {
    override fun exportPdf() { ... }
}

class Excel : File { 
    // PdfExporterλ¥Ό κµ¬ν„ν•μ§€ μ•μΌλ―€λ΅ λ¶ν•„μ”ν• μ¤λ²„λΌμ΄λ”©μ΄ μ—†μµλ‹λ‹¤.
}
```

#### β… ν•΄κ²°μ±… 2: κ³„μ•½μ— μν• μ„¤κ³„ (Design by Contract)

νƒ€μ… κ³„μΈµμ„ μ•μ „ν•κ² μ μ§€ν•κΈ° μ„ν•΄ μνΌνƒ€μ…(ν΄λΌμ΄μ–ΈνΈ)κ³Ό μ„λΈνƒ€μ…(μ„λ²„) κ°„μ κ³„μ•½(μ‚¬μ „/μ‚¬ν›„ μ΅°κ±΄)μ„ μ •μν•μ—¬ λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™(LSP)μ„ μ¤€μν–μµλ‹λ‹¤.

```kotlin
abstract class File {
    var exportCount = 0L
    
    fun export() {
        this.preCondition() // μνΌνƒ€μ…μ μ‚¬μ „ μ΅°κ±΄
        this.exportFile()
        exportCount++
    }
    
    private fun preCondition() {
        // μ‚¬μ „ μ΅°κ±΄: μΉ΄μ΄νΈλ” -1 μ΄ν•μΌ μ μ—†μµλ‹λ‹¤.
        if (this.exportCount <= -1) throw IllegalStateException()
    }
    
    protected abstract fun exportFile()
}

class MustExportCountGreaterThanZeroFile : File() {
    override fun exportFile() {
        this.postCondition() // μ„λΈνƒ€μ…μ μ‚¬ν›„ μ΅°κ±΄
    }
    
    private fun postCondition() {
        // μ‚¬ν›„ μ΅°κ±΄: λ΅μ§ μν–‰ ν›„ μƒνƒλ¥Ό κ²€μ¦ν•©λ‹λ‹¤.
        if (this.exportCount < 0) throw IllegalStateException()
    }
}
```

* **μ‚¬μ „ μ΅°κ±΄(Pre-condition):** ν΄λΌμ΄μ–ΈνΈκ°€ λ©”μ„λ“ νΈμ¶ μ „μ— λ§μ΅±μ‹μΌμ•Ό ν•λ” μ΅°κ±΄μ…λ‹λ‹¤.
* **μ‚¬ν›„ μ΅°κ±΄(Post-condition):** μ„λ²„κ°€ λ©”μ„λ“ μ‹¤ν–‰ ν›„μ— λ³΄μ¥ν•΄μ•Ό ν•λ” μ΅°κ±΄μ…λ‹λ‹¤.

μ΄λ¬ν• κ³„μ•½μ„ μ¤€μν•¨μΌλ΅μ¨ ν΄λΌμ΄μ–ΈνΈλ” κµ¬μ²΄μ μΈ μ„λΈνƒ€μ…μ΄ λ¬΄μ—‡μΈμ§€ λ°λΌλ„ μ•μ‹¬ν•κ³  `export()`λ¥Ό νΈμ¶ν•  μ μμµλ‹λ‹¤.

-----

### 4\. Comparative Analysis (κ°λ… λΉ„κµ)

| κµ¬λ¶„ | μ„λΈν΄λμ‹± (Subclassing) | μ„λΈνƒ€μ΄ν•‘ (Subtyping) |
| :--- | :--- | :--- |
| **λ©μ ** | **μ½”λ“ μ¬μ‚¬μ©** (κµ¬ν„ μƒμ†) | **νƒ€μ… κ³„μΈµ μ •μ** (μΈν„°νμ΄μ¤ μƒμ†) |
| **κ΄€μ ** | λ¶€λ¨μ λ‚΄λ¶€ κµ¬ν„μ„ λ¬Όλ ¤λ°›μµλ‹λ‹¤. | λ¶€λ¨μ ν–‰λ™(μΈν„°νμ΄μ¤)μ„ λ€μ²΄ν•©λ‹λ‹¤. |
| **κ²°ν•©λ„** | **κ°•κ²°ν•©** (λ¶€λ¨ κµ¬ν„ λ³€κ²½ μ‹ μν–¥μ„ λ°›μµλ‹λ‹¤) | **λμ¨ν• κ²°ν•©** (λ©”μ‹μ§€μ— μμ΅΄ν•©λ‹λ‹¤) |
| **LSP μ¤€μ** | λ³΄μ¥ν•μ§€ μ•μµλ‹λ‹¤ (μ¤λ²„λΌμ΄λ”© μ¤μ© κ°€λ¥μ„±) | **ν•„μ**μ…λ‹λ‹¤ (μ™„λ²½ν• λ€μ²΄ κ°€λ¥μ„±) |
| **κ¶μ¥ μ—¬λ¶€** | μ§€μ–‘ (CompositionμΌλ΅ λ€μ²΄λ¥Ό κ¶μ¥ν•©λ‹λ‹¤) | **μ§€ν–¥** (λ‹¤ν•μ„±μ„ μ„ν• μ¬λ°”λ¥Έ μƒμ†μ…λ‹λ‹¤) |

### π€ Key Takeaways

1.  **is-a κ΄€κ³„μ μ§„μ‹¤:** λ¬Έλ§¥μ , μ–΄νμ μΌλ΅ λΉ„μ·ν•΄ λ³΄μ—¬λ„ \*\*ν–‰λ™(Behavior)\*\*μ΄ νΈν™λμ§€ μ•μΌλ©΄ is-a κ΄€κ³„κ°€ μ•„λ‹™λ‹λ‹¤.
2.  **LSPμ™€ λ‹¤ν•μ„±:** μ„λΈνƒ€μ…μ€ μνΌνƒ€μ…μ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤λ¥Ό μ¤€μν•΄μ•Ό ν•λ©°, ν΄λΌμ΄μ–ΈνΈ μ…μ¥μ—μ„ μ°¨μ΄μ  μ—†μ΄ κµμ²΄ κ°€λ¥ν•΄μ•Ό ν•©λ‹λ‹¤.
3.  **κµ¬ν„λ³΄λ‹¤ μΈν„°νμ΄μ¤:** μƒμ†μ€ κµ¬ν„μ„ μ¬μ‚¬μ©ν•κΈ° μ„ν•΄μ„κ°€ μ•„λ‹λΌ, ν΄λΌμ΄μ–ΈνΈκ°€ κ³ μμ¤€μ μΈν„°νμ΄μ¤μ— μμ΅΄ν•κ² λ§λ“¤κΈ° μ„ν•΄ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤.